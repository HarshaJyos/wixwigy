{"version":3,"file":"static/js/384.3144758c.chunk.js","mappings":"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","sources":["lexical/ui/ImageResizer.jsx","lexical/nodes/ImageComponent.jsx","../node_modules/@lexical/react/LexicalNestedComposer.prod.mjs"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport * as React from 'react';\nimport { useRef } from 'react';\n\nfunction clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\nconst Direction = {\n  east: 1 << 0,\n  north: 1 << 3,\n  south: 1 << 1,\n  west: 1 << 2,\n};\n\nexport default function ImageResizer({\n  onResizeStart,\n  onResizeEnd,\n  buttonRef,\n  imageRef,\n  maxWidth,\n  editor,\n  showCaption,\n  setShowCaption,\n  captionsEnabled,\n}) {\n  const controlWrapperRef = useRef(null);\n  const userSelect = useRef({\n    priority: '',\n    value: 'default',\n  });\n  const positioningRef = useRef({\n    currentHeight: 0,\n    currentWidth: 0,\n    direction: 0,\n    isResizing: false,\n    ratio: 0,\n    startHeight: 0,\n    startWidth: 0,\n    startX: 0,\n    startY: 0,\n  });\n  const editorRootElement = editor.getRootElement();\n  // Find max width, accounting for editor padding.\n  const maxWidthContainer = maxWidth\n    ? maxWidth\n    : editorRootElement !== null\n    ? editorRootElement.getBoundingClientRect().width - 20\n    : 100;\n  const maxHeightContainer = editorRootElement !== null ? editorRootElement.getBoundingClientRect().height - 20 : 100;\n\n  const minWidth = 100;\n  const minHeight = 100;\n\n  const setStartCursor = (direction) => {\n    const ew = direction === Direction.east || direction === Direction.west;\n    const ns = direction === Direction.north || direction === Direction.south;\n    const nwse =\n      (direction & Direction.north && direction & Direction.west) ||\n      (direction & Direction.south && direction & Direction.east);\n\n    const cursorDir = ew ? 'ew' : ns ? 'ns' : nwse ? 'nwse' : 'nesw';\n\n    if (editorRootElement !== null) {\n      editorRootElement.style.setProperty('cursor', `${cursorDir}-resize`, 'important');\n    }\n    if (document.body !== null) {\n      document.body.style.setProperty('cursor', `${cursorDir}-resize`, 'important');\n      userSelect.current.value = document.body.style.getPropertyValue('-webkit-user-select');\n      userSelect.current.priority = document.body.style.getPropertyPriority('-webkit-user-select');\n      document.body.style.setProperty('-webkit-user-select', `none`, 'important');\n    }\n  };\n\n  const setEndCursor = () => {\n    if (editorRootElement !== null) {\n      editorRootElement.style.setProperty('cursor', 'text');\n    }\n    if (document.body !== null) {\n      document.body.style.setProperty('cursor', 'default');\n      document.body.style.setProperty('-webkit-user-select', userSelect.current.value, userSelect.current.priority);\n    }\n  };\n\n  const handlePointerDown = (event, direction) => {\n    if (!editor.isEditable()) {\n      return;\n    }\n\n    const image = imageRef.current;\n    const controlWrapper = controlWrapperRef.current;\n\n    if (image !== null && controlWrapper !== null) {\n      event.preventDefault();\n      const { width, height } = image.getBoundingClientRect();\n      const positioning = positioningRef.current;\n      positioning.startWidth = width;\n      positioning.startHeight = height;\n      positioning.ratio = width / height;\n      positioning.currentWidth = width;\n      positioning.currentHeight = height;\n      positioning.startX = event.clientX;\n      positioning.startY = event.clientY;\n      positioning.isResizing = true;\n      positioning.direction = direction;\n\n      setStartCursor(direction);\n      onResizeStart();\n\n      controlWrapper.classList.add('image-control-wrapper--resizing');\n      image.style.height = `${height}px`;\n      image.style.width = `${width}px`;\n\n      document.addEventListener('pointermove', handlePointerMove);\n      document.addEventListener('pointerup', handlePointerUp);\n    }\n  };\n  const handlePointerMove = (event) => {\n    const image = imageRef.current;\n    const positioning = positioningRef.current;\n\n    const isHorizontal = positioning.direction & (Direction.east | Direction.west);\n    const isVertical = positioning.direction & (Direction.south | Direction.north);\n\n    if (image !== null && positioning.isResizing) {\n      // Corner cursor\n      if (isHorizontal && isVertical) {\n        let diff = Math.floor(positioning.startX - event.clientX);\n        diff = positioning.direction & Direction.east ? -diff : diff;\n\n        const width = clamp(positioning.startWidth + diff, minWidth, maxWidthContainer);\n\n        const height = width / positioning.ratio;\n        image.style.width = `${width}px`;\n        image.style.height = `${height}px`;\n        positioning.currentHeight = height;\n        positioning.currentWidth = width;\n      } else if (isVertical) {\n        let diff = Math.floor(positioning.startY - event.clientY);\n        diff = positioning.direction & Direction.south ? -diff : diff;\n\n        const height = clamp(positioning.startHeight + diff, minHeight, maxHeightContainer);\n\n        image.style.height = `${height}px`;\n        positioning.currentHeight = height;\n      } else {\n        let diff = Math.floor(positioning.startX - event.clientX);\n        diff = positioning.direction & Direction.east ? -diff : diff;\n\n        const width = clamp(positioning.startWidth + diff, minWidth, maxWidthContainer);\n\n        image.style.width = `${width}px`;\n        positioning.currentWidth = width;\n      }\n    }\n  };\n  const handlePointerUp = () => {\n    const image = imageRef.current;\n    const positioning = positioningRef.current;\n    const controlWrapper = controlWrapperRef.current;\n    if (image !== null && controlWrapper !== null && positioning.isResizing) {\n      const width = positioning.currentWidth;\n      const height = positioning.currentHeight;\n      positioning.startWidth = 0;\n      positioning.startHeight = 0;\n      positioning.ratio = 0;\n      positioning.startX = 0;\n      positioning.startY = 0;\n      positioning.currentWidth = 0;\n      positioning.currentHeight = 0;\n      positioning.isResizing = false;\n\n      controlWrapper.classList.remove('image-control-wrapper--resizing');\n\n      setEndCursor();\n      onResizeEnd(width, height);\n\n      document.removeEventListener('pointermove', handlePointerMove);\n      document.removeEventListener('pointerup', handlePointerUp);\n    }\n  };\n  return (\n    <div ref={controlWrapperRef}>\n      {!showCaption && captionsEnabled && (\n        <button\n          className=\"image-caption-button\"\n          ref={buttonRef}\n          onClick={() => {\n            setShowCaption(!showCaption);\n          }}\n        >\n          Add Caption\n        </button>\n      )}\n      <div\n        className=\"image-resizer image-resizer-n\"\n        onPointerDown={(event) => {\n          handlePointerDown(event, Direction.north);\n        }}\n      />\n      <div\n        className=\"image-resizer image-resizer-ne\"\n        onPointerDown={(event) => {\n          handlePointerDown(event, Direction.north | Direction.east);\n        }}\n      />\n      <div\n        className=\"image-resizer image-resizer-e\"\n        onPointerDown={(event) => {\n          handlePointerDown(event, Direction.east);\n        }}\n      />\n      <div\n        className=\"image-resizer image-resizer-se\"\n        onPointerDown={(event) => {\n          handlePointerDown(event, Direction.south | Direction.east);\n        }}\n      />\n      <div\n        className=\"image-resizer image-resizer-s\"\n        onPointerDown={(event) => {\n          handlePointerDown(event, Direction.south);\n        }}\n      />\n      <div\n        className=\"image-resizer image-resizer-sw\"\n        onPointerDown={(event) => {\n          handlePointerDown(event, Direction.south | Direction.west);\n        }}\n      />\n      <div\n        className=\"image-resizer image-resizer-w\"\n        onPointerDown={(event) => {\n          handlePointerDown(event, Direction.west);\n        }}\n      />\n      <div\n        className=\"image-resizer image-resizer-nw\"\n        onPointerDown={(event) => {\n          handlePointerDown(event, Direction.north | Direction.west);\n        }}\n      />\n    </div>\n  );\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport './ImageNode.css';\n\nimport { AutoFocusPlugin } from '@lexical/react/LexicalAutoFocusPlugin';\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport LexicalErrorBoundary from '@lexical/react/LexicalErrorBoundary';\nimport { HashtagPlugin } from '@lexical/react/LexicalHashtagPlugin';\nimport { HistoryPlugin } from '@lexical/react/LexicalHistoryPlugin';\nimport { LexicalNestedComposer } from '@lexical/react/LexicalNestedComposer';\nimport { RichTextPlugin } from '@lexical/react/LexicalRichTextPlugin';\nimport { useLexicalNodeSelection } from '@lexical/react/useLexicalNodeSelection';\nimport { mergeRegister } from '@lexical/utils';\nimport {\n  $getNodeByKey,\n  $getSelection,\n  $isNodeSelection,\n  $isRangeSelection,\n  $setSelection,\n  CLICK_COMMAND,\n  COMMAND_PRIORITY_LOW,\n  createCommand,\n  DRAGSTART_COMMAND,\n  KEY_BACKSPACE_COMMAND,\n  KEY_DELETE_COMMAND,\n  KEY_ENTER_COMMAND,\n  KEY_ESCAPE_COMMAND,\n  SELECTION_CHANGE_COMMAND,\n} from 'lexical';\nimport * as React from 'react';\nimport { Suspense, useCallback, useEffect, useRef, useState } from 'react';\n\nimport { useSharedHistoryContext } from '../context/SharedHistoryContext';\nimport EmojisPlugin from '../plugins/EmojisPlugin';\nimport KeywordsPlugin from '../plugins/KeywordsPlugin';\nimport LinkPlugin from '../plugins/LinkPlugin';\nimport MentionsPlugin from '../plugins/MentionsPlugin';\nimport ContentEditable from '../ui/ContentEditable';\nimport ImageResizer from '../ui/ImageResizer';\nimport Placeholder from '../ui/Placeholder';\nimport { $isImageNode } from './ImageNode';\n\nconst imageCache = new Set();\n\nexport const RIGHT_CLICK_IMAGE_COMMAND = createCommand('RIGHT_CLICK_IMAGE_COMMAND');\n\nfunction useSuspenseImage(src) {\n  if (!imageCache.has(src)) {\n    throw new Promise((resolve) => {\n      const img = new Image();\n      img.src = src;\n      img.onload = () => {\n        imageCache.add(src);\n        resolve(null);\n      };\n    });\n  }\n}\n\nfunction LazyImage({ altText, className, imageRef, src, width, height, maxWidth }) {\n  useSuspenseImage(src);\n  return (\n    <img\n      className={className || undefined}\n      src={src}\n      alt={altText}\n      ref={imageRef}\n      style={{\n        height,\n        maxWidth,\n        width,\n      }}\n      draggable=\"false\"\n    />\n  );\n}\n\nexport default function ImageComponent({\n  src,\n  altText,\n  nodeKey,\n  width,\n  height,\n  maxWidth,\n  resizable,\n  showCaption,\n  caption,\n  captionsEnabled,\n}) {\n  const imageRef = useRef(null);\n  const buttonRef = useRef(null);\n  const [isSelected, setSelected, clearSelection] = useLexicalNodeSelection(nodeKey);\n  const [isResizing, setIsResizing] = useState(false);\n  const [editor] = useLexicalComposerContext();\n  const [selection, setSelection] = useState(null);\n  const activeEditorRef = useRef(null);\n\n  const onDelete = useCallback(\n    (payload) => {\n      if (isSelected && $isNodeSelection($getSelection())) {\n        const event = payload;\n        event.preventDefault();\n        const node = $getNodeByKey(nodeKey);\n        if ($isImageNode(node)) {\n          node.remove();\n        }\n      }\n      return false;\n    },\n    [isSelected, nodeKey]\n  );\n\n  const onEnter = useCallback(\n    (event) => {\n      const latestSelection = $getSelection();\n      const buttonElem = buttonRef.current;\n      if (isSelected && $isNodeSelection(latestSelection) && latestSelection.getNodes().length === 1) {\n        if (showCaption) {\n          // Move focus into nested editor\n          $setSelection(null);\n          event.preventDefault();\n          caption.focus();\n          return true;\n        } else if (buttonElem !== null && buttonElem !== document.activeElement) {\n          event.preventDefault();\n          buttonElem.focus();\n          return true;\n        }\n      }\n      return false;\n    },\n    [caption, isSelected, showCaption]\n  );\n\n  const onEscape = useCallback(\n    (event) => {\n      if (activeEditorRef.current === caption || buttonRef.current === event.target) {\n        $setSelection(null);\n        editor.update(() => {\n          setSelected(true);\n          const parentRootElement = editor.getRootElement();\n          if (parentRootElement !== null) {\n            parentRootElement.focus();\n          }\n        });\n        return true;\n      }\n      return false;\n    },\n    [caption, editor, setSelected]\n  );\n\n  const onClick = useCallback(\n    (payload) => {\n      const event = payload;\n\n      if (isResizing) {\n        return true;\n      }\n      if (event.target === imageRef.current) {\n        if (event.shiftKey) {\n          setSelected(!isSelected);\n        } else {\n          clearSelection();\n          setSelected(true);\n        }\n        return true;\n      }\n\n      return false;\n    },\n    [isResizing, isSelected, setSelected, clearSelection]\n  );\n\n  const onRightClick = useCallback(\n    (event) => {\n      editor.getEditorState().read(() => {\n        const latestSelection = $getSelection();\n        const domElement = event.target;\n        if (\n          domElement.tagName === 'IMG' &&\n          $isRangeSelection(latestSelection) &&\n          latestSelection.getNodes().length === 1\n        ) {\n          editor.dispatchCommand(RIGHT_CLICK_IMAGE_COMMAND, event);\n        }\n      });\n    },\n    [editor]\n  );\n\n  useEffect(() => {\n    let isMounted = true;\n    const rootElement = editor.getRootElement();\n    const unregister = mergeRegister(\n      editor.registerUpdateListener(({ editorState }) => {\n        if (isMounted) {\n          setSelection(editorState.read(() => $getSelection()));\n        }\n      }),\n      editor.registerCommand(\n        SELECTION_CHANGE_COMMAND,\n        (_, activeEditor) => {\n          activeEditorRef.current = activeEditor;\n          return false;\n        },\n        COMMAND_PRIORITY_LOW\n      ),\n      editor.registerCommand(CLICK_COMMAND, onClick, COMMAND_PRIORITY_LOW),\n      editor.registerCommand(RIGHT_CLICK_IMAGE_COMMAND, onClick, COMMAND_PRIORITY_LOW),\n      editor.registerCommand(\n        DRAGSTART_COMMAND,\n        (event) => {\n          if (event.target === imageRef.current) {\n            // TODO This is just a temporary workaround for FF to behave like other browsers.\n            // Ideally, this handles drag & drop too (and all browsers).\n            event.preventDefault();\n            return true;\n          }\n          return false;\n        },\n        COMMAND_PRIORITY_LOW\n      ),\n      editor.registerCommand(KEY_DELETE_COMMAND, onDelete, COMMAND_PRIORITY_LOW),\n      editor.registerCommand(KEY_BACKSPACE_COMMAND, onDelete, COMMAND_PRIORITY_LOW),\n      editor.registerCommand(KEY_ENTER_COMMAND, onEnter, COMMAND_PRIORITY_LOW),\n      editor.registerCommand(KEY_ESCAPE_COMMAND, onEscape, COMMAND_PRIORITY_LOW)\n    );\n\n    rootElement?.addEventListener('contextmenu', onRightClick);\n\n    return () => {\n      isMounted = false;\n      unregister();\n      rootElement?.removeEventListener('contextmenu', onRightClick);\n    };\n  }, [\n    clearSelection,\n    editor,\n    isResizing,\n    isSelected,\n    nodeKey,\n    onDelete,\n    onEnter,\n    onEscape,\n    onClick,\n    onRightClick,\n    setSelected,\n  ]);\n\n  const setShowCaption = () => {\n    editor.update(() => {\n      const node = $getNodeByKey(nodeKey);\n      if ($isImageNode(node)) {\n        node.setShowCaption(true);\n      }\n    });\n  };\n\n  const onResizeEnd = (nextWidth, nextHeight) => {\n    // Delay hiding the resize bars for click case\n    setTimeout(() => {\n      setIsResizing(false);\n    }, 200);\n\n    editor.update(() => {\n      const node = $getNodeByKey(nodeKey);\n      if ($isImageNode(node)) {\n        node.setWidthAndHeight(nextWidth, nextHeight);\n      }\n    });\n  };\n\n  const onResizeStart = () => {\n    setIsResizing(true);\n  };\n\n  const { historyState } = useSharedHistoryContext();\n\n  const draggable = isSelected && $isNodeSelection(selection) && !isResizing;\n  const isFocused = isSelected || isResizing;\n  return (\n    <Suspense fallback={null}>\n      <>\n        <div draggable={draggable}>\n          <LazyImage\n            className={isFocused ? `focused ${$isNodeSelection(selection) ? 'draggable' : ''}` : null}\n            src={src}\n            altText={altText}\n            imageRef={imageRef}\n            width={width}\n            height={height}\n            maxWidth={maxWidth}\n          />\n        </div>\n        {showCaption && (\n          <div className=\"image-caption-container\">\n            <LexicalNestedComposer initialEditor={caption}>\n              <AutoFocusPlugin />\n              <MentionsPlugin />\n              <LinkPlugin />\n              <EmojisPlugin />\n              <HashtagPlugin />\n              <KeywordsPlugin />\n\n              <HistoryPlugin externalHistoryState={historyState} />\n\n              <RichTextPlugin\n                contentEditable={<ContentEditable className=\"ImageNode__contentEditable\" />}\n                placeholder={<Placeholder className=\"ImageNode__placeholder\">Enter a caption...</Placeholder>}\n                ErrorBoundary={LexicalErrorBoundary}\n              />\n            </LexicalNestedComposer>\n          </div>\n        )}\n        {resizable && $isNodeSelection(selection) && isFocused && (\n          <ImageResizer\n            showCaption={showCaption}\n            setShowCaption={setShowCaption}\n            editor={editor}\n            buttonRef={buttonRef}\n            imageRef={imageRef}\n            maxWidth={maxWidth}\n            onResizeStart={onResizeStart}\n            onResizeEnd={onResizeEnd}\n            captionsEnabled={captionsEnabled}\n          />\n        )}\n      </>\n    </Suspense>\n  );\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport{useCollaborationContext as e}from\"@lexical/react/LexicalCollaborationContext\";import{LexicalComposerContext as t,createLexicalComposerContext as r}from\"@lexical/react/LexicalComposerContext\";import{useRef as o,useContext as n,useMemo as l,useEffect as i}from\"react\";import{jsx as a}from\"react/jsx-runtime\";function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}var c=s((function(e){const t=new URLSearchParams;t.append(\"code\",e);for(let e=1;e<arguments.length;e++)t.append(\"v\",arguments[e]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}));function p(e){const t=e.transform();return null!==t?new Set([t]):new Set}function d({initialEditor:s,children:d,initialNodes:f,initialTheme:u,skipCollabChecks:m}){const h=o(!1),x=n(t);null==x&&c(9);const[_,{getTheme:g}]=x,v=l((()=>{const e=u||g()||void 0,t=r(x,e);if(void 0!==e&&(s._config.theme=e),s._parentEditor=_,f)for(let e of f){let t=null,r=null;if(\"function\"!=typeof e){const o=e;e=o.replace,t=o.with,r=o.withKlass||null}const o=s._nodes.get(e.getType());s._nodes.set(e.getType(),{exportDOM:o?o.exportDOM:void 0,klass:e,replace:t,replaceWithKlass:r,transforms:p(e)})}else{const e=s._nodes=new Map(_._nodes);for(const[t,r]of e)s._nodes.set(t,{exportDOM:r.exportDOM,klass:r.klass,replace:r.replace,replaceWithKlass:r.replaceWithKlass,transforms:p(r.klass)})}return s._config.namespace=_._config.namespace,s._editable=_._editable,[s,t]}),[]),{isCollabActive:w,yjsDocMap:b}=e(),M=m||h.current||b.has(s.getKey());return i((()=>{M&&(h.current=!0)}),[M]),i((()=>_.registerEditableListener((e=>{s.setEditable(e)}))),[s,_]),a(t.Provider,{value:v,children:!w||M?d:null})}export{d as LexicalNestedComposer};\n"],"names":["clamp","value","min","max","Math","Direction","east","north","south","west","ImageResizer","_ref","onResizeStart","onResizeEnd","buttonRef","imageRef","maxWidth","editor","showCaption","setShowCaption","captionsEnabled","controlWrapperRef","useRef","userSelect","priority","positioningRef","currentHeight","currentWidth","direction","isResizing","ratio","startHeight","startWidth","startX","startY","editorRootElement","getRootElement","maxWidthContainer","getBoundingClientRect","width","maxHeightContainer","height","handlePointerDown","event","isEditable","image","current","controlWrapper","preventDefault","positioning","clientX","clientY","ew","ns","nwse","cursorDir","style","setProperty","document","body","getPropertyValue","getPropertyPriority","setStartCursor","classList","add","addEventListener","handlePointerMove","handlePointerUp","isHorizontal","isVertical","diff","floor","remove","removeEventListener","_jsxs","ref","children","_jsx","className","onClick","onPointerDown","imageCache","Set","RIGHT_CLICK_IMAGE_COMMAND","createCommand","LazyImage","altText","src","has","Promise","resolve","img","Image","onload","useSuspenseImage","undefined","alt","draggable","ImageComponent","_ref2","nodeKey","resizable","caption","isSelected","setSelected","clearSelection","useLexicalNodeSelection","setIsResizing","useState","useLexicalComposerContext","selection","setSelection","activeEditorRef","onDelete","useCallback","payload","$isNodeSelection","$getSelection","node","$getNodeByKey","$isImageNode","onEnter","latestSelection","buttonElem","getNodes","length","$setSelection","focus","activeElement","onEscape","target","update","parentRootElement","shiftKey","onRightClick","getEditorState","read","tagName","$isRangeSelection","dispatchCommand","useEffect","isMounted","rootElement","unregister","mergeRegister","registerUpdateListener","_ref3","editorState","registerCommand","SELECTION_CHANGE_COMMAND","_","activeEditor","COMMAND_PRIORITY_LOW","CLICK_COMMAND","DRAGSTART_COMMAND","KEY_DELETE_COMMAND","KEY_BACKSPACE_COMMAND","KEY_ENTER_COMMAND","KEY_ESCAPE_COMMAND","historyState","useSharedHistoryContext","isFocused","Suspense","fallback","_Fragment","LexicalNestedComposer","initialEditor","AutoFocusPlugin","MentionsPlugin","LinkPlugin","EmojisPlugin","HashtagPlugin","KeywordsPlugin","HistoryPlugin","externalHistoryState","RichTextPlugin","contentEditable","ContentEditable","placeholder","Placeholder","ErrorBoundary","LexicalErrorBoundary","nextWidth","nextHeight","setTimeout","setWidthAndHeight","e","c","t","URLSearchParams","append","arguments","Error","__esModule","Object","prototype","hasOwnProperty","call","default","p","transform","d","s","initialNodes","f","initialTheme","u","skipCollabChecks","m","h","o","x","n","getTheme","g","v","l","r","_config","theme","_parentEditor","replace","with","withKlass","_nodes","get","getType","set","exportDOM","klass","replaceWithKlass","transforms","Map","namespace","_editable","isCollabActive","w","yjsDocMap","b","M","getKey","i","registerEditableListener","setEditable","a","Provider"],"sourceRoot":""}