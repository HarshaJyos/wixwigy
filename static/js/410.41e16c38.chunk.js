"use strict";(self.webpackChunkcodox_lexical=self.webpackChunkcodox_lexical||[]).push([[410],{9410:(e,n,t)=>{t.r(n),t.d(n,{default:()=>m});var a=t(5532),s=t(8578),i=t(407),r=t(5043),o=t(3632),l=t(579);function u(e,n){let{equation:t,setEquation:a,inline:s}=e;const i=e=>{a(e.target.value)};return s&&n instanceof HTMLInputElement?(0,l.jsxs)("span",{className:"EquationEditor_inputBackground",children:[(0,l.jsx)("span",{className:"EquationEditor_dollarSign",children:"$"}),(0,l.jsx)("input",{className:"EquationEditor_inlineEditor",value:t,onChange:i,autoFocus:!0,ref:n}),(0,l.jsx)("span",{className:"EquationEditor_dollarSign",children:"$"})]}):(0,l.jsxs)("div",{className:"EquationEditor_inputBackground",children:[(0,l.jsx)("span",{className:"EquationEditor_dollarSign",children:"$$\n"}),(0,l.jsx)("textarea",{className:"EquationEditor_blockEditor",value:t,onChange:i,ref:n}),(0,l.jsx)("span",{className:"EquationEditor_dollarSign",children:"\n$$"})]})}const c=(0,r.forwardRef)(u);var d=t(2004),E=t(1961);function m(e){let{equation:n,inline:t,nodeKey:u}=e;const[m]=(0,a.DF)(),[x,f]=(0,r.useState)(n),[g,h]=(0,r.useState)(!1),q=(0,r.useRef)(null),p=(0,r.useCallback)(e=>{h(!1),m.update(()=>{const n=(0,i.ns)(u);(0,E.R_)(n)&&(n.setEquation(x),e&&n.selectNext(0,0))})},[m,x,u]);return(0,r.useEffect)(()=>{g||x===n||f(n)},[g,n,x]),(0,r.useEffect)(()=>g?(0,s.Sd)(m.registerCommand(i.Mv,e=>{const n=document.activeElement;return q.current!==n&&p(),!1},i.Wg),m.registerCommand(i.Q$,e=>{const n=document.activeElement;return q.current===n&&(p(!0),!0)},i.Wg)):m.registerUpdateListener(e=>{let{editorState:n}=e;n.read(()=>{const e=(0,i.vJ)();return(0,i.RT)(e)&&e.has(u)&&1===e.getNodes().length})&&h(!0)}),[m,u,p,g]),(0,l.jsx)(l.Fragment,{children:g?(0,l.jsx)(c,{equation:x,setEquation:f,inline:t,ref:q}):(0,l.jsx)(o.tH,{onError:e=>m._onError(e),fallback:null,children:(0,l.jsx)(d.A,{equation:x,inline:t,onDoubleClick:()=>h(!0)})})})}}}]);
//# sourceMappingURL=410.41e16c38.chunk.js.map